window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".navigation"),t=document.querySelector(".navigation__openMenu"),n=document.querySelector(".mobailMenu"),o=document.querySelectorAll(".mobailMenu__item"),l=document.querySelectorAll(".carusel__item"),a=document.querySelectorAll(".carusel__nav"),c=document.querySelectorAll(".myButton"),s=document.querySelector(".overlay"),r=document.getElementById("modalStart"),i=document.getElementById("modalThanks"),d=document.querySelector(".modal__close"),u=document.querySelector(".modal__close_Thanks"),y=document.querySelectorAll(".noLink"),m=document.getElementById("callBtn"),v=document.getElementById("buyPenBtn"),p=document.getElementById("buyPlasticBtn"),f=document.querySelector("form"),h=document.querySelectorAll("input"),E={};function g(e){l.forEach(e=>{e.style.display="none"}),l[e].style.display="block"}function _(e){return document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})}function b(e){const t={name:/^[a-zA-Zа-яА-Я]+$/,email:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/,phone:/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/},n=e.dataset.required;return!t[n]||t[n].test(e.value)}function L(e){const t=e.parentElement,n=t.querySelector(".formControl_err");n&&(e.classList.remove("isInvalid"),t.removeChild(n))}function k(e){e.forEach(e=>{e.value=""})}window.addEventListener("scroll",()=>{pageYOffset>=70?e.classList.add("navigation_active"):e.classList.remove("navigation_active")}),t.addEventListener("click",()=>{n.classList.toggle("mobailMenu_active"),t.classList.toggle("navigation__openMenu_active")}),o.forEach(e=>{e.addEventListener("click",()=>{n.classList.toggle("mobailMenu_active"),t.classList.toggle("navigation__openMenu_active")})}),g(+Math.floor(5*Math.random()+1)),a.forEach((e,t)=>{e.addEventListener("touchstart",()=>{g(t)})}),a.forEach((e,t)=>{e.addEventListener("mouseenter",()=>{g(t)})}),c.forEach((t,n)=>{1===n?t.addEventListener("click",e=>{e.preventDefault(),_("#buy")}):2===n?t.addEventListener("click",e=>{e.preventDefault(),_("#plastic")}):t.addEventListener("click",()=>{s.style.display="block",E.type="обратный звонок",0===n?m.style.display="block":3===n?(v.style.display="block",E.type="3D ручку"):(p.style.display="block",E.type="пластик");const t=+window.innerWidth-+e.clientWidth;t>0&&(document.body.style.marginRight=`${t}px`),document.body.style.overflow="hidden"})}),d.addEventListener("click",()=>{s.style.display="none",m.style.display="none",v.style.display="none",p.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px",k(h),h.forEach(e=>L(e))}),u.addEventListener("click",()=>{s.style.display="none",i.style.display="none",m.style.display="none",v.style.display="none",p.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px",r.style.display="block"}),y.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.getAttribute("href");console.log(n),_(n)})}),f.addEventListener("submit",e=>{e.preventDefault(),!function(){const e=[];return h.forEach(t=>{e.push(b(t)),b(t)||t.parentElement.querySelector(".formControl_err")||function(e){const t=e.parentElement,n=function(e){return`\n      <div class = "formControl_err">${e}</div>\n    `}(e.dataset.invalidMessage);e.classList.add("isInvalid"),t.insertAdjacentHTML("beforeend",n)}(t)}),e.every(e=>!0===e)}()?k(h):(h.forEach(e=>{E[e.name]=e.value}),fetch("mailer/smart.php",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(E)}),k(h),r.style.display="none",i.style.display="block")}),h.forEach(e=>{e.addEventListener("focus",()=>{h.forEach(e=>L(e))})})});